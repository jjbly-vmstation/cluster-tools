# Default configuration for cluster-tools
# Source this file to set default values for all tools
#
# Usage: source /path/to/defaults.env

#######################################
# Cluster Connection
#######################################

# Path to kubeconfig file
KUBECONFIG="${KUBECONFIG:-${HOME}/.kube/config}"

# kubectl command timeout
KUBECTL_TIMEOUT="${KUBECTL_TIMEOUT:-30s}"

# Default namespace for namespace-scoped operations
DEFAULT_NAMESPACE="${DEFAULT_NAMESPACE:-default}"

#######################################
# Logging Configuration
#######################################

# Log level: DEBUG, INFO, WARN, ERROR
LOG_LEVEL="${LOG_LEVEL:-INFO}"

# Log directory for file-based logging
LOG_DIR="${LOG_DIR:-${HOME}/.vmstation/logs}"

# Enable/disable color output
COLOR_OUTPUT="${COLOR_OUTPUT:-true}"

# Timestamp format for logs
LOG_TIMESTAMP_FORMAT="${LOG_TIMESTAMP_FORMAT:-%Y-%m-%dT%H:%M:%S%z}"

#######################################
# Validation Thresholds
#######################################

# Maximum allowed pod restart count before alerting
MAX_POD_RESTART_COUNT="${MAX_POD_RESTART_COUNT:-5}"

# Minimum expected memory per node (GB)
MIN_NODE_MEMORY_GB="${MIN_NODE_MEMORY_GB:-4}"

# Minimum expected CPU cores per node
MIN_NODE_CPU_CORES="${MIN_NODE_CPU_CORES:-2}"

# Days before certificate expiry to warn
CERT_EXPIRY_WARNING_DAYS="${CERT_EXPIRY_WARNING_DAYS:-30}"

#######################################
# Output Formats
#######################################

# Default output format for tools (text, json, yaml)
DEFAULT_OUTPUT_FORMAT="${DEFAULT_OUTPUT_FORMAT:-text}"

# Enable JSON output by default
JSON_OUTPUT="${JSON_OUTPUT:-false}"

#######################################
# Diagnostic Configuration
#######################################

# Default output directory for diagnostics
DIAGNOSTIC_OUTPUT_DIR="${DIAGNOSTIC_OUTPUT_DIR:-./diagnostic-output}"

# Number of log tail lines to collect
LOG_TAIL_LINES="${LOG_TAIL_LINES:-1000}"

# Number of days of events to collect
EVENTS_DAYS="${EVENTS_DAYS:-7}"

#######################################
# Remediation Configuration
#######################################

# Enable dry-run mode by default (safety)
DRY_RUN="${DRY_RUN:-false}"

# Require confirmation for destructive operations
REQUIRE_CONFIRMATION="${REQUIRE_CONFIRMATION:-true}"

# Grace period for pod deletion (seconds)
POD_DELETE_GRACE_PERIOD="${POD_DELETE_GRACE_PERIOD:-30}"

#######################################
# Power Management Configuration
#######################################

# VMStation configuration directory
VMSTATION_CONFIG_DIR="${VMSTATION_CONFIG_DIR:-/etc/vmstation}"

# VMStation log directory
VMSTATION_LOG_DIR="${VMSTATION_LOG_DIR:-/var/log/vmstation}"

# Default broadcast address for WoL
BROADCAST_ADDR="${BROADCAST_ADDR:-255.255.255.255}"

# Default WoL port
WOL_PORT="${WOL_PORT:-9}"

# Default number of WoL packets to send
PACKET_COUNT="${PACKET_COUNT:-3}"

# Timeout for waiting for host to come online (seconds)
WAIT_FOR_HOST_TIMEOUT="${WAIT_FOR_HOST_TIMEOUT:-300}"

#######################################
# Monitoring Stack Configuration
#######################################

# Monitoring namespace
MONITORING_NAMESPACE="${MONITORING_NAMESPACE:-monitoring}"

# Logging namespace
LOGGING_NAMESPACE="${LOGGING_NAMESPACE:-logging}"

# Expected Loki retention period
EXPECTED_RETENTION_PERIOD="${EXPECTED_RETENTION_PERIOD:-168h}"

# Expected Loki replication factor
EXPECTED_REPLICATION_FACTOR="${EXPECTED_REPLICATION_FACTOR:-1}"

#######################################
# Network Configuration
#######################################

# DNS test hostnames
DNS_TEST_HOSTS="${DNS_TEST_HOSTS:-kubernetes.default.svc.cluster.local}"

# External connectivity test targets
EXTERNAL_TEST_HOSTS="${EXTERNAL_TEST_HOSTS:-8.8.8.8 1.1.1.1}"

# Network check timeout (seconds)
NETWORK_CHECK_TIMEOUT="${NETWORK_CHECK_TIMEOUT:-5}"

#######################################
# Test Configuration
#######################################

# BATS test directory
BATS_TEST_DIR="${BATS_TEST_DIR:-tests}"

# Skip cluster tests if not connected
SKIP_CLUSTER_TESTS="${SKIP_CLUSTER_TESTS:-false}"
